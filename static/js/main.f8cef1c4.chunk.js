(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,a){e.exports=a(425)},192:function(e,t,a){},195:function(e,t,a){},221:function(e,t){},223:function(e,t){},254:function(e,t){},255:function(e,t){},303:function(e,t){},305:function(e,t){},328:function(e,t){},425:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(182),i=a.n(l),o=(a(192),a(22)),c=a.n(o),u=a(37),s=a(183),d=a(68),m=a(69),E=a(71),f=a(70),p=a(72),C=a(427),S=a(428),O=a(429),I=(a(195),a(426)),T=a(102),N=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],F=function(e){var t=new Date;return r.a.createElement(S.a,{onSubmit:function(t){return e.retrieveInfo(t)},style:{width:"90%"}},r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Label,null,"Enter Comma Separated List of Facilities:")),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Control,{name:"facList",type:"text",value:e.facList,onChange:function(t){return e.handleUserInput(t)},style:{width:"100%"}})),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Label,null,"How far back would you like to search?")),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Control,{name:"month",as:"select",value:e.month,onChange:function(t){return e.handleUserInput(t)},style:{width:"25%"}},N.map(function(e,t){return r.a.createElement("option",{key:t},e)})),r.a.createElement(S.a.Control,{name:"year",as:"select",value:e.year,onChange:function(t){return e.handleUserInput(t)},style:{width:"25%"}},r.a.createElement("option",null,t.getFullYear()),r.a.createElement("option",null,t.getFullYear()-1),r.a.createElement("option",null,t.getFullYear()-2),r.a.createElement("option",null,t.getFullYear()-3),r.a.createElement("option",null,t.getFullYear()-4))),r.a.createElement(I.a,{style:{justifyContent:"center"}},e.submitted?r.a.createElement(O.a,{type:"submit",size:"sm",disabled:!0},"Waiting"):r.a.createElement(O.a,{type:"submit",size:"sm"},"Submit")))},D=function(e,t){var a=e.replace(/\s/g,"").split(",");return Promise.all(a.map(function(e){return g(e,t,1)}))},g=function(){var e=Object(u.a)(c.a.mark(function e(t,a,n){var r,l,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=4,e.prev=1,l="https://iaspub.epa.gov/enviro/efservice/WATER_SYSTEM/PWSID/=/".concat(t,"/VIOLATION/COMPL_PER_BEGIN_DATE/>/").concat(a,"/JSON"),e.next=5,T({uri:l});case 5:if(i=e.sent,0!==(o=JSON.parse(i)).length){e.next=11;break}return e.abrupt("return",[{PWSID:t,failed:!0}]);case 11:return e.abrupt("return",o);case 12:e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(1),!(n<r)){e.next=20;break}return e.abrupt("return",g(t,a,n+1));case 20:return console.log("Attempt on ".concat(t,"'s data ended in failure.")),e.abrupt("return",[{PWSID:t,failed:!0}]);case 22:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t,a,n){return e.apply(this,arguments)}}(),R=a(8),v=a(102),h=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).handleClick=Object(u.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.checking){e.next=6;break}return e.next=3,y(a.props.pwsId,a.props.enfId);case 3:t=e.sent,n=t[0],a.setState({epaData:n});case 6:case"end":return e.stop()}},e)})),a.state={checking:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;if(this.state.epaData){var t=this.state.epaData;return r.a.createElement("tr",null,r.a.createElement("td",{style:{backgroundColor:"Blue"}}),r.a.createElement("td",{colSpan:"1"},"Originator: ","S"===t.ORIGINATOR_CODE?"State":"EPA Region"),r.a.createElement("td",{colSpan:"1"},"Date: ",t.ENFORCEMENT_DATE),r.a.createElement("td",{colSpan:"2"},"Action: ",b[t.ENFORCEMENT_ACTION_TYPE_CODE]),r.a.createElement("td",{colSpan:"6"},"Comment: ",t.ENFORCEMENT_COMMENT_TEXT),r.a.createElement("td",{style:{backgroundColor:"Blue"}}))}return r.a.createElement("tr",{onClick:function(t){return e.handleClick()}},r.a.createElement("td",{style:{backgroundColor:"Blue"}}),r.a.createElement("td",{colSpan:"10",className:"enf"},"Click to view Enforcement Details"),r.a.createElement("td",{style:{backgroundColor:"Blue"}}))}}]),t}(r.a.Component),b={"SF%":"Civil Case concluded","SF&":"Crim Case referred to AG",SF2:"Referred for Higher St Level Review ",SF3:"Case appealed ",SF4:"Case dropped ",SF5:"Hook-up/Extension Ban ",SF9:"Civil Case referred to AG",SFG:"Public Notif issued",SFH:"Boil Water Order",SFJ:"Formal NOV issued",SFK:"BCA signed ",SFL:"AO (w/o penalty) issued ",SFM:"Admin Penalty assessed",SFN:"Show-cause Hearing ",SFO:"AO (w/penalty) issued",SFP:"Civil Case under development ",SFQ:"Civil Case filed",SFR:"Consent Decree/Judgement ",SFS:"Default Judgement ",SFT:"Injunction",SFU:"Temp Restrain Order/Prelim Injunc ",SFV:"Crim Case filed",SFW:"Crim Case concluded",SIA:"Violation/ Reminder Notice",SIB:"Compliance Meeting conducted",SIC:"Tech Assistance Visit",SID:"Site Visit (enforcement)",SIE:"Public Notif requested",SIF:"Public Notif received",SII:"CCR Follow-up Notice","SO+":"No addtl Formal Action needed",SO0:"No Longer Subject to Rule",SO6:"Intentional no-action ",SO7:"Unresolved",SO8:"Other",SOX:"Compliance achieved ",SOY:"Variance/ Exemption issued",SOZ:"St Turbidity Waiver issued ","EF-":"CFP Consent Order/Decree w/penalty ","EF!":"PAO issued ","EF%":"Fed Civil Case concluded ","EF&":"Fed Crim Case referred to DOJ ","EF/":"Fed 1431 (Emergency) Order ","EF<":"Fed CFP issued","EF=":"Fed CFP Default Judgement ",EF2:"Referred for Higher Level Review",EF9:"Civil Case referred to DOJ",EFG:"Public Notif issued",EFH:"Boil Water Order",EFJ:"Formal NOV issued",EFK:"BCA signed ",EFL:"FAO issued ",EFN:"Show-cause Hearing ",EFQ:"Civil Case filed",EFR:"Consent Decree/ Judgement",EFS:"Default Judgement ",EFT:"Injunction",EFU:"Temp Restrain Order/Prelim Injunc ",EFV:"Crim Case filed",EFW:"Crim Case concluded",EIA:"Violation/ Reminder Notice",EIB:"Compliance Meeting conducted",EIC:"Tech Assistance Visit",EID:"Site Visit (enforcement)",EIE:"Public Notif requested",EIF:"Public Notif received",EII:"CCR Follow-up Notice","EO+":"No addtl Formal Action needed",EO0:"No Longer Subject to Rule",EO6:"Intentional no-action ",EO7:"Unresolved",EO8:"Other",EOX:"Compliance achieved ",EOY:"Variance/ Exemption issued",EOZ:"Turbidity Waiver issued",ESX:"Implicit SWTR RTC (Cannot be reported, EPA-generated)",ETX:"Implicit TCR RTC (Cannot be reported, EPA-generated)"},y=function(){var e=Object(u.a)(c.a.mark(function e(t,a,n){var r,l,i,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=2,e.prev=1,l="https://iaspub.epa.gov/enviro/efservice/ENFORCEMENT_ACTION/ENFORCEMENT_ID/=/".concat(a,"/PWSID/=/").concat(t,"/JSON"),e.next=5,v({uri:l});case 5:return i=e.sent,o=JSON.parse(i),e.abrupt("return",o);case 10:if(e.prev=10,e.t0=e.catch(1),!(n<r)){e.next=16;break}return e.abrupt("return",setTimeout(y(t,a,n+1),2e3));case 16:return console.log("Attempt on ".concat(a,"'s data ended in failure.")),e.abrupt("return",[]);case 18:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,a,n){return e.apply(this,arguments)}}(),A=function(e){var t={"01":"MCL,SingleSample","02":"MCL,Average","03":"Monitoring,Regular","3A":"Monitoring,Regular","04":"Monitoring,Check/Repeat/Confirmation","05":"Notification,State","06":"Notification,Public","07":"TreatmentTechniques","08":"Variance/Exemption/OtherCompliance","09":"RecordKeeping",10:"OperationsReport",11:"Non-AcuteMRDL",12:"QualifiedOperatorFailure",13:"AcuteMRDL",19:"Monitoring,GWRAssessmentSourceWater",20:"FailuretoConsult/Respond",21:"MCL,Acute(TCR)",22:"MCL,Monthly(TCR)",23:"Monitoring,RoutineMajor(TCR)",24:"Monitoring,RoutineMinor(TCR)",25:"Monitoring,RepeatMajor(TCR)",26:"Monitoring,RepeatMinor(TCR)",27:"Monitoring,Routine(DBP)",28:"SanitarySurveyCooperationFailure",29:"M&RFilterProfile/CPEFailure",30:"Monitoring/SubmitPlan(IDSE)",31:"MonitoringofTreatment(Unfilt/GWR)",32:"Monitoring,SourceWater(LT2)",33:"FailureSubmitTreatmentRequirementRpt",34:"Monitoring,GWRTriggered/Additional",35:"FailureSubmitStage2DBPRReport",36:"MonitoringofTreatment(SWTR-Filter)",37:"TreatmentTechnique,NoPriorStateApproval",38:"M&RFilterTurbidityReporting",39:"MonitoringandReporting(FBR)",40:"TreatmentTechnique(FBR)",41:"FailuretoMaintainMicrobialTreatment",42:"FailuretoProvideTreatment",43:"SingleTurbidityExceed(EnhancedSWTR)",44:"TreatmentTechniqueExceedsTurb0.3NTU",45:"FailuretoAddressDeficiencies",46:"TreatmentTechniquePrecursorRemoval",47:"TreatmentTechniqueUncoveredReservoir",48:"FailuretoAddressContamination",51:"InitialLCRTapSampling",52:"Follow-upandRoutineTapSampling",53:"WaterQualityParameterM&R",56:"Initial,Follow-up,orRoutineSOWTM&R",57:"OCCT/SOWTRecommendation",58:"OCCT/SOWTInstallation",59:"WaterQualityParameterNon-Compliance",63:"MPLNon-Compliance",64:"LeadServiceLineReplacement(LSLR)",65:"PublicEducation",66:"LeadConsumerNotice",71:"CCRCompleteFailuretoReport",72:"CCRInadequateReporting",73:"FailuretoNotifyOtherPWS",75:"PNViolationforanNPDWRViolation",76:"PNViolationwithoutNPDWRViolation"};return r.a.createElement("tr",{className:"violationInfo"},r.a.createElement("td",null,e.facData.PWSID),r.a.createElement("td",null,e.facData.PWS_NAME),r.a.createElement("td",null,e.facData.ADDRESS_LINE1),r.a.createElement("td",null,e.facData.CITY_NAME),r.a.createElement("td",null,e.facData.STATE_CODE),r.a.createElement("td",null,e.facData.ZIP_CODE),r.a.createElement("td",null,"Yes"),r.a.createElement("td",null,"WQ. Water Quality Management"),r.a.createElement("td",null,e.facilityType()),r.a.createElement("td",null,"Violation No. ",e.violation.VIOLATION_ID,", ","Y"===e.violation.IS_MAJOR_VIOL_IND?"Major":"Minor",", ",e.violation.VIOLATION_CATEGORY_CODE),r.a.createElement("td",null,e.violation.PRIMACY_AGENCY_CODE),r.a.createElement("td",null,t[e.violation.VIOLATION_CODE]?t[e.violation.VIOLATION_CODE]:"Violation Code: ".concat(e.violation.VIOLATION_CODE)))},P=function(e){return console.log(e.facilityInfo),Object(R.isNullOrUndefined)(e.facilityInfo)?null:e.facilityInfo.map(function(t,a){return void 0!==t?r.a.createElement(M,{key:a,facData:t[0],failedFacilities:e.failedFacilities}):null})},M=function(e){var t=function(){return"TNCWS"===e.facData.PWS_TYPE_CODE?"Transient Non-Community Water System":"NTNCWS"===e.facData.PWS_TYPE_CODE?"Non-Transient Non-Community Water System":"CWS"===e.facData.PWS_TYPE_CODE?"Community Water System":"Unknown"};if(!0===e.facData.failed)return r.a.createElement(w,{facData:e.facData});if(void 0===e.facData.VIOLATION||null===e.facData.VIOLATION)return r.a.createElement(W,{facData:e.facData,facilityType:t});if(e.facData.VIOLATION.length>0)return e.facData.VIOLATION.map(function(a,n){return r.a.createElement("tbody",{key:n},r.a.createElement(A,{facData:e.facData,violation:a,facilityType:t}),r.a.createElement(h,{enfId:a.LATEST_ENFORCEMENT_ID,pwsId:e.facData.PWSID}))});var a=e.facData.VIOLATION.VIOLATION_ROW;return r.a.createElement("tbody",{key:0},r.a.createElement(A,{facData:e.facData,violation:a,facilityType:t}),r.a.createElement(h,{enfId:a.LATEST_ENFORCEMENT_ID,pwsId:e.facData.PWSID}))},w=function(e){return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.facData.PWSID),r.a.createElement("td",{colSpan:"11"},"Data retrieval failure.")),r.a.createElement("tr",null,r.a.createElement("td",{style:{backgroundColor:"Blue"}}),r.a.createElement("td",{colSpan:"10"},"Nothing to display"),r.a.createElement("td",{style:{backgroundColor:"Blue"}})))},W=function(e){return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.facData.PWSID),r.a.createElement("td",null,e.facData.PWS_NAME),r.a.createElement("td",null,e.facData.ADDRESS_LINE1),r.a.createElement("td",null,e.facData.CITY_NAME),r.a.createElement("td",null,e.facData.STATE_CODE),r.a.createElement("td",null,e.facData.ZIP_CODE),r.a.createElement("td",null,"N"),r.a.createElement("td",null,"NA"),r.a.createElement("td",null,e.facilityType()),r.a.createElement("td",null,"NA"),r.a.createElement("td",null,"NA"),r.a.createElement("td",null,"NA")),r.a.createElement("tr",null,r.a.createElement("td",{style:{backgroundColor:"Blue"}}),r.a.createElement("td",{colSpan:"10"},"Nothing to display"),r.a.createElement("td",{style:{backgroundColor:"Blue"}})))},L=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(E.a)(this,Object(f.a)(t).call(this,e))).handleUserInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(s.a)({},n,r))},a.retrieveInfo=function(){var e=Object(u.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({submitted:!0}),t.preventDefault(),n="01-".concat(a.state.month,"-").concat(a.state.year),e.next=5,D(a.state.facList,n);case 5:r=e.sent,a.setState({facilityInfo:r,receivedInfo:!0,submitted:!1});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={submitted:!1,receivedInfo:!1,facList:"",month:"JAN",year:(new Date).getFullYear()},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.receivedInfo?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Jason's EPA Database Aggregator."),r.a.createElement(k,null)),r.a.createElement("main",null,r.a.createElement(C.a,{bordered:!0,striped:!0,size:"sm"},r.a.createElement(_,null),r.a.createElement(P,{facilityInfo:this.state.facilityInfo,failedFacilities:this.failedFacilities})))):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Jason's EPA Database Aggregator."),r.a.createElement("br",null),r.a.createElement(F,{retrieveInfo:this.retrieveInfo,submitted:this.state.submitted,handleUserInput:this.handleUserInput,facList:this.state.facList,beginDate:this.state.beginDate})))}}]),t}(r.a.Component),_=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"PWS ID"),r.a.createElement("td",null,"Facility Name"),r.a.createElement("td",null,"Street Address"),r.a.createElement("td",null,"City Address"),r.a.createElement("td",null,"State"),r.a.createElement("td",null,"Zip Code"),r.a.createElement("td",null,"Notice of Violation"),r.a.createElement("td",null,"Regulatory Sector"),r.a.createElement("td",null,"Regulatory Subsector"),r.a.createElement("td",null,"Type of Notice"),r.a.createElement("td",null,"Issuing Agency"),r.a.createElement("td",null,"Violation Type")))},k=function(){return r.a.createElement(S.a,{style:{textAlign:"center"}},r.a.createElement("h4",null,"View data below."),r.a.createElement("h4",null,"Reset to try again."),r.a.createElement(O.a,{type:"submit",size:"sm"},"Reset"))},V=L;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[187,1,2]]]);
//# sourceMappingURL=main.f8cef1c4.chunk.js.map